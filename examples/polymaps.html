<html>
	<head>
		<title>HTMAPL: Polymaps</title>
		<script type="text/javascript" src="../lib/jquery-1.5.min.js"></script>
		<script type="text/javascript" src="../lib/polymaps.js"></script>
		<script type="text/javascript" src="../src/htmapl.js"></script>
		<style type="text/css">@import url(style/examples.css);</style>
	</head>
	<body>

		<h1>HTMAPL: Polymaps</h1>

		<p>This map is interactive, and overlays a pure HTML &lt;div&gt; with absolutely
		positioned markers styled with CSS.</p>
		<div class="map narrow interact wheel" data-center="37.765,-122.413" data-zoom="11">
			<div class="layer" data-type="image"
				data-url="http://c.tile.cloudmade.com/1a1b06b230af4efdbb989ea99e9841af/998/256/{Z}/{X}/{Y}.png"></div>
			<div class="marker" data-location="37.7647463,-122.41951"><a href="http://stamen.com">Stamen</a></div>
		</div>

		<p>This map is styles tiled <a href="http://geojson.org">GeoJSON</a>
		layers and uses a link template to wrap anchors around each SVG element
		based on the corresponding feature data.</p>
		<div class="map wide" data-center="38,-96" data-zoom="4">
			<div class="layer" data-type="geoJson"
				data-url="http://polymaps.appspot.com/state/{Z}/{X}/{Y}.json"
				data-title="{name}"
				data-href="http://google.com/search?q={name}"
				data-style="stroke: #000; stroke-width: 1; fill: white">
			</div>
		</div>

		<p>This map is a lot like the previous one, but specifies a JavaScript
		function (<tt>random()</tt>) as the style attribute's "fill" property
		value. This function is passed along to Polymaps' <a
			href="http://polymaps.org/docs/stylist.html">stylist</a>, which
		returns a random color value for each uniquely named GeoJSON feature.</p>
		<div class="map wide" data-center="38,-96" data-zoom="4">
			<div class="layer" data-type="geoJson"
				data-url="http://polymaps.appspot.com/state/{Z}/{X}/{Y}.json"
				data-title="{name}"
				data-href="http://google.com/search?q={name}"
				data-style="fill: javascript:random"></div>
			<script type="text/javascript">
				var colors = ["#ff7f0e", "#1f77b4", "#9467bd", "#bcbd22", "#17becf"],
						seen = {};
				function random(f) {
					var k = f.properties.name;
					if (!seen[k]) {
						seen[k] = colors[Math.round(Math.random() * (colors.length - 1))];
					}
					return seen[k];
				}
			</script>
		</div>

		<script type="text/javascript" defer="defer">
			// do it.
			$(function() {
				$("div.map").htmapl();
			});
		</script>

	</body>
</html>
